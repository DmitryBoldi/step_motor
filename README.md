# Телеметрия
## Лабораторная работа Stepmotor
### Автор: Сафронов И.А.
### Используемое ПО
1. arm-none-eabi-g++ --- кросс-компилятор.
1. make --- система сборки проекта.
1. cmake --- система управления проектом.
1. git --- система контроля версий.

- Настройка проекта: 
    cmake -B build
- Сборка проекта:
    cmake --build build     
- Прошивка МК:
    cmake --install build 

- Steps

        A0 - A
        A1 - B
        A2 - C 
        A3 - D



- TIMER

    Предделитель (Prescaler)Предделитель используется для уменьшения частоты тактирования таймера. Он делит входную частоту тактирования таймера на заданное значение. Это позволяет таймеру работать с более низкой частотой, чем тактовая частота микроконтроллера.

    Формула:
    Частота таймера= чатота тактирования МК/Предделитель+1Частота 

    ​Пример:

    Если тактовая частота микроконтроллера составляет 84 МГц и вы устанавливаете предделитель в 8399, то частота таймера будет:
    Частота таймера=84000000​/8399+1=10000 Гц
    Это означает, что таймер будет "тикать" 10,000 раз в секунду.

- PERIOD

    Период определяет, сколько "тиков" таймера должно пройти, прежде чем он достигнет значения, при котором произойдет событие (например, переполнение или срабатывание прерывания)Период указывается в "тиках" таймера.

    Формула:
    Время задержки=Период+1/Частота таймера

    ​Пример:
    Если вы установили период в 9999 и частота таймера равна 10 кГц, то время задержки будет:
    Время задержки=9999+1/10000​=1 секунда
    Это означает, что таймер будет переполняться каждые 1 секунду.


- ИСПОЛЬЗОВАНИЕ ТАЙМЕРА 


    Когда стоит останавливать таймер
    Если таймер больше не нужен: Если вы завершили все операции, требующие использования таймера, и хотите освободить ресурсы, вы можете вызвать timer_disable_counter(TIM2).
    Если вы хотите изменить настройки таймера: Если вам нужно изменить предделитель или период таймера, вам нужно сначала остановить таймер.
    Рекомендации
    Если вы хотите, чтобы таймер работал постоянно для создания задержек, вы можете оставить его включенным.
    Если вы хотите, чтобы таймер не работал, когда он вам не нужен, добавьте вызов timer_disable_counter(TIM2) в соответствующих местах вашего кода.

   - ПРИМЕРЫ 

     Если вы хотите оставить таймер включенным, ваш код может выглядеть так:

     void timer_delay(uint32_t ms) {
    for (uint32_t i = 0; i < ms; i++) {
        timer_set_counter(TIM2, 0);
        while (timer_get_counter(TIM2) < 1000); // Ждем 1000 тиков
    }
    // Не останавливаем таймер, чтобы использовать его снова
     }  
     
     Если вы хотите остановить таймер, когда он больше не нужен:

     void timer_delay(uint32_t ms) {
    for (uint32_t i = 0; i < ms; i++) {
        timer_set_counter(TIM2, 0);
        while (timer_get_counter(TIM2) < 1000); // Ждем 1000 тиков
    }
    timer_disable_counter(TIM2); // Останавливаем таймер, если он больше не нужен
     }


# <u> Вопрос. А как понять всё таки когда нужно использовать таймер в дальнейшем , а когда не нужно. Если он использветься в цикле вайл, то получаеться он будет использоваться. </u>
